Electronic Design

In this section, we will go step by step through how the hardware device was assembled and how its various modules communicate. As seen in the attached image, the hardware device is composed of various modules, three to be precise, along with the ESP32 board, which, in addition to enabling communication between the modules, also provides an integrated DAC (Digital-to-Analog Converter). For convenience, in the description of the device's electronics, reference will be made to the attached image located in this folder.

ESP32 Board
The ESP32 board is placed at the center of the working breadboards to allow positioning of the various peripherals around it. Specifically, we place the V5 and CLK pins of the board at positions j3 of the left board and a3 of the right board, respectively. The board pins that will be used are G18, G25 (DAC), and G32, along with, of course, the GND (Ground) pin. In this instance, the V5 pin is not used to power the modules, as an external power supply is dedicated solely to them. Instead, for convenience, the board will be powered via a cable connected to its dedicated input.

Power Supply
Instead of using the power provided by the board through the V5 pin, as mentioned earlier, we use an external power source. Specifically, a power bank with a cut cable is used to connect to the board, with a positive wire for power and a negative wire to close the circuit. These two wires will be placed at the bottom right of the breadboards, precisely at the bottom of the positive and negative channels on the far right. This way, the positive channel becomes the power supply, allowing us to connect the wires that supply power to the modules on the same vertical row, while the negative channel becomes the ground, allowing us to place the GND wires of the modules on the same vertical row to close the circuits. It should be noted that a 15nF filter capacitor is placed across the two channels just mentioned, which acts as a 'circuit protector' in case of voltage issues.

Power-on LED
The first element, which is very simple to manage, is the green power-on LED. It is placed with its anode in b13 and its cathode in b14. To power it, a 165-ohm resistor is used to limit the maximum current output. One end of the resistor is placed in position g13, on the same horizontal row as the pin that will be used to turn on the LED, specifically the G18 pin, and the other end of the resistor will be placed next to the positive terminal of the green LED, in position a13. Finally, the circuit is completed by connecting the negative terminal of the LED to the GND of the board via a connector (the white wire in the attached image, next to the green LED), with one end in position e14, on the same horizontal row as the negative terminal of the LED, and the other end in position g21, on the horizontal row of the GND pin of the board. The board, by activating the G18 pin during code execution, will allow the LED to turn on and off, indicating when our device is connected or not.

Vibration Module
The device at the bottom right in the attached image is the vibration module used to mark time. It has three pins: IN (Input), VCC (Power), and GND (Ground), respectively placed in f30, f29, and f28 of the breadboard. It is connected via the red wire in the attached image, with one end in position j30, on the same horizontal row as the module's input pin, and the other end next to the G32 pin, in position b15. This connection allows sending inputs from the board to the module, providing tactile feedback related to the beat of the score. As analyzed earlier, separate power and ground channels were created for the modules, which will be used to supply current and close the circuit. One end of a wire is placed next to the module's power pin in i29, and the other end in the vertical row dedicated to power, while the ground pin of the module is connected with a wire from j28 to the vertical row dedicated to the ground.

DAC and Amplification Module
To allow the board to play the digital notes received from the web, we need two devices in this case: a DAC, integrated into the board with output pin G25, and an amplification module (located at the top right in the attached image) to allow the DAC to communicate with the audio output module that we will discuss next. The integrated DAC is directly used by the code and sends signals through the G25 pin, which must be connected to the input pin of the amplifier module. The module in question has several pins because it needs to manage two possible input pins and one ground, four pins dedicated to the output, i.e., positive and negative for two audio output channels called Left and Right, and finally two pins for power. The module is placed with the ground pin in position i10, at the top right of the breadboard. The connections in this specific case are designed to manage only one output channel, namely the left one. We start by connecting, via one end of a wire in position b13, the G25 pin to the Left input pin of the module, with the other end of the wire in position i9, thus allowing data to be sent from the DAC to the amplification module. Then, the input ground is connected to the board's ground, with the two pins linked via a wire between i10 of the right board and i21 of the left board. The two power pins, positive and negative, will be connected to the appropriate channels created earlier. Finally, the two left output pins are used to connect to the audio output module, with the Lout+ pin allowing data transmission and the Lout- pin being connected to the ground of the audio output device.

Audio Output Module
This module (at the top left in the attached image) is a 3.5mm jack connector that allows headphones to be connected to the device and hear the sound outputs. It only has four pins, two dedicated to output called RING1 and RING2 for the right and left headphones, a pin called TIP dedicated to managing output if the headphones have a microphone, and a SLEEVE pin used for ground. Since only the left audio channel is active from the amplification module, RING1 and Lout+ are connected to allow hearing the note transformation that started from the DAC, and Lout- is connected to SLEEVE to manage the ground. To summarize the system structure, there are various autonomous modules connected to the ESP32 board. One circuit is dedicated to the power-on LED module, another to the vibration module, and finally, there is one for the amplification and audio output module. All can function independently as the ESP32 board is used as a communication medium, sending output information from it. The external power supply has been implemented to allow hardware portability and to separate the current load, allowing the devices and the ESP32 board to work independently without the risk of power shortages.